1. 학습 날짜 // 2020-12-07(월)
2. 학습시간 // 9:00~22:00

3. 학습 범위 및 주제 // 콘텐츠 협상, SQL
4. 동료 학습 방법 // sanam, yohai님과 토의
5. 학습 목표 // SQL 첫걸음 독파, webserv 프로젝트 마무리

---

6. 상세 학습 내용

![image](https://user-images.githubusercontent.com/54612343/102000958-e46c6b80-3d2f-11eb-9c98-51aa025152aa.png)

서버사이드 콘텐츠 협상을 구현하였다. 사실 뭐 대단한 건 없고 아래 과정을 통해 동작한다.

1. 요청에 Accept-Language 헤더가 포함되어있는지 확인

2. 만약 Accept-Language 헤더가 포함되어있다면, 파싱하여 Accept-Language별 가중치 테이블을 생성

3. 가중치 테이블에서 가중치가 높은 순서대로 최초 요청된 자원의 이름에 `_language` 를 붙인 자원이 해당 location에 있는지 확인한다. 단, 서버에 저장된 자원은 디폴트로 메타언어데이터가 `en`이라고 임의로 가정해뒀다. `en`으로만 요청되면 최초에 요청된 uri를 탐색하게 해뒀다.

4. 만약 있다면 이를 최종적으로 반환하는 자원으로 확정하고 관련처리를 한다. 만약 없다면 최초에 요청된 자원을 찾는다.

   ```
   Accept-Language: ko, en;q=0.5, fr;q=0.8, jp;q=0.3
   헤더가 위와 같이 들어오고 요청한 자원이 index.html이라면,
   
   index_ko.html, index_fr.html, index.html index_jp.html을 순서대로 탐색해서 반환한다.
   ```

   

언어별로 리소스를 저장한 디렉토리를 달리둘까 생각도 해봤는데 어차피 이는 서버에서 정의하기 나름이라는 판단하에 구현하였다.


---

7. 학습 내용에 대한 개인적인 총평

Webserv 버전 1이 완성되기에 남은 TODO 카드가 2개. 그 중 하나인 콘텐츠 협상을 끝내봐야지!하면서 자정에 잡고 새벽 4시까지 달렸네요ㅎㅎ 아고 내일 힘들겠다.. 이런 습관을 고쳐야하는데; 지속가능하게 질 높게 사고할 수 있도록 좀 더 자기관리를 해야겠습니다.

---

다음 학습 계획

- SQL 책 독파

