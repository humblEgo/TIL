1. 학습 날짜 // 2020-07-07(화)

2. 학습시간 // 9:00~22:00

3. 학습 범위 및 주제 // minishell

4. 동료 학습 방법 // 클러스터에서 eunhkim님과 토론하며 학습진행.

5. 학습 목표 // minishell의 builtin함수를 구현한다.

---

6. 상세 학습 내용

#### 문제: 기존의 방식으로는 pwd를 할 때 환경변수 PWD 값이 바뀌면 출력되는 값이 바뀔 수 있다.

#### 해결: getcwd 함수를 통해 path를 구한다.

기존에는 pwd 커맨드를 입력시 PWD 환경변수의 값을 프로젝트를 수행하며 만들어둔 get_env함수를 통해 current path를 가져와서 출력하도록 만들었다. 그러나 `export PWD=` 같은 명령어를 통해 환경변수 PWD의 값을 변경해버리면 다른 pwd명령어가 무용지물이 되는 문제가 있었다. 이에 getcwd 함수를 활용하여 current path를 가져와서 출력하도록 만들었다.

#### 문제: 기존의 방식으로는 cd를 실행 후 ls 명령어가 정상적으로 동작하지 않는다.

#### 해결: cd 명령어를 실행시키면, PWD 환경변수에 cd 명령어를 통해 변경된 현재 위치를 저장하도록 만든다.

기존에는 cd를 실행 후 ls 명령어가 정상적으로 동작하지 않았다. 확인해보니 PWD 환경변수의 값을 참조하여 ls함수가 작동한다는 것을 알게되었고, cd 명령어를 실행시켰을 때 PWD 환경변수에 현재 path를 저장하도록 하여 해결하였다.


#### 커맨드와 `&&` `||` `|` `;` 간에 실행순서 보장에 대해.

sleep 함수를 이용하여 test1 프로그램은 5초 후 'first'를 출력하고, test2프로그램은 1초 후 'second'를 출력하도록 만들었다.

- `test1 && test2`

  ```bash
  (5초 후) first
  (1초 후) second
  ```

  순서가 보장됨.

- `test1 || test2`

  ```bash
  (5초 후) first
  (1초 후) second
  ```

  순서가 보장됨.

- `test1 ; test2`

  ```bash
  (5초 후) first
  (1초 후) second
  ```

  순서가 보장됨.

- `test1 | test2`

  ```bash
  (1초 후)second
  (5초 후)프롬프트 나타남.
  ```

  순서가 보장되지 않음.  구현하려면 fork로 프로세스를 분기시켜야함.


---

7. 학습 내용에 대한 개인적인 총평

동료가 미리 만들어둔 함수 덕에 까다로울 수 있는 함수를 쉽게 구현할 수 있었습니다. 
eunhkim님이 구현하기로 한 함수를 빠르게 구현하는 반면 저는 pipe를 제대로 처리하기 위한 방법을 고민하는데 너무 시간을 많이 쓴 것 같아서 죄책감이 듭니다.
결과적으로 `&&`, `||`, `;`으로 나누어진 구문은 실행순서가 보장되는 반면 `|`로 나누어진 구문은 실행순서가 보장되지 않는 것을 확인하였는데, 이를 어떻게 구현할지 걱정됩니다. multiple pipe만 구현하면 끝나는데 흠..

---

다음 학습 계획

- minishell multiple pipe 구현하기
