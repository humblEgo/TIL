#### 1. 학습 날짜 // 2020-05-04(월)

#### 2. 학습시간 // 13:00~22:00

#### 3. 학습 범위 및 주제 // 리팩토링 방법

#### 4. 동료 학습 방법 // 슬랙콜, 팀뷰어를 통한 원격 페어 프로그래밍

#### 5. 학습 목표 // 42mate 프로젝트의 리팩토링 완료

---

#### 6. 상세 학습 내용

- 은휼님이 DB를 다루며 어떻게 개발을 진행하는지에 대해 현업 시니어개발자님과 얘기를 나눈 내용을 공유해주셨다.
  - 데이터 filed는 규약적으로 개수가 정해져있다. 적으면 120개, 많으면 255개
  - DB 접속횟수를 최소화하고, 가져오는 데이터 양 자체가 적어야한다.(ex query문에서 모든 row를 가져오는 것처럼..)
  - ORM은 고수들에게는 비효율적이다. 고급 개발자들은 직접 query 문을 작성한다.
  - heroku의 connection은 DB 동시접속자에 대한 내용임.
  - 스페이스클라우드는 클릭로그도 데이터로 저장함. 무엇을 저장할 것인가도 고민이 필요함.
  - DATABASE 협업은 어떻게하는가!
  - 커밋은 최대한 자주해야하는줄 알았는데, 그렇지 않은 팀도 있음. by 팀의 성향에 따라 ‘의미있는 커밋’의 단위가 다름.
  - PR을 자주하는 것이 중요함.
  - 하루나 이틀 동안 작업할 분량으로 task를 잘 나누고, 해당 task를 브랜치로 나눈다. 하루나 이틀마다 브런치가 생겼다가 합쳐지며 계속 업데이트된다.
  - DB의 경우 모델만 업데이트하는 브랜치를 분기해서 하루나 이틀 동안 작업한 뒤 빠르게 PR하는 것이 좋았다. 데이터베이스가 후퇴하는 일이 없게. 웬만하면 어느 브랜치든 최신의 데이터베이스와 모델을 쓰도록!
  - 그냥 현업에서는 하나의 DB를 공유해서 작업하기도 한다.
  - 우리의 경우 개발용 remote DB를 공유하거나 모델 변경사항은 따로 branch를 만들어서 계속 공유하는 것이 좋았던 것 같다.
  - 현업에서는 DB migration을 자동으로 만드는 것이 아니라 수동으로 현재 DB상태에 맞게 작성을 해서 문제가 안생기게 한다.

**이슈**

- 애초 협의했던 것과 달리 KST로 오늘 날짜의 date를 가져와서 데이터베이스에 저장된 UTC날짜 비교하는 코드가 있는 데 괴리가 발생할 수 있을 것 같다.
  - database에 입력되는 datetime data의 timezone을 utc로 설정
  - 지금까지 datetime.utcnow()함수로 models의 datetime 형식 filed에 값을 넣었는데, 이 경우 timezone info가 없는 ‘naive time’으로 저장되는 것을 확인함.
  - 이 경우 heroku외 다른 환경에서 프로그램을 실행할 경우, 시간 비교하는 구문이 잘 동작하지 않을 가능성이 있음. ex) 2020-05-05 15:00(+00:00) 과 2020-05-05 15:15 를 비교했을 때 후자가 더 작다고 나오는 오류를 확인함..;
  - DB에 datetime.now(utc)로 대신 넣어서 timezone 정보도 같이 넣는걸 시도해보자.

---

#### 학습 내용에 대한 개인적인 총평

하루종일 리팩토링을 진행하였습니다. 리팩토링을 페어프로그래밍을 통해 진행한 것은 처음이었는데 즐겁고 유익한 시간이었습니다. 페어프로그래밍 특성상 제가 어떤 행위를 하려면 그 이유를 동료에게 구체적으로 설명해야합니다. 이 특성 덕분에 간단한 변수명부터 함수구조까지 변경되어야할 이유를 재검토해가며 코딩했습니다. 더 좋았던 것은 제가 생각한 '읽기 쉬운 코드'와 타인이 생각하는 '읽기 쉬운 코드'의 기준이 조금씩 다른 것을 경험할 수 있었다는 것입니다. 특히 추상화 수준을 맞추는 것에 대해 어느정도의 커먼센스가 필요하다는 것을 더욱 느꼈습니다. 작업이 일단락된 후 에너지가 많이 소모된 것을 느꼈지만, 제가 추구하는 학습을 한 것 같아서 뿌듯했습니다.

---

#### 다음 학습 계획

- 주석 달기
- 함수들을 파일별로 정리하기
